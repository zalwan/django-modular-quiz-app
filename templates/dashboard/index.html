{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Welcome, {{ request.user.username }}!</h2>
    <a href="{% url 'logout' %}" class="btn btn-danger btn-sm">Logout</a>
  </div>

  <hr />
  <h4>Available Quizzes</h4>
  <ul class="list-group mb-4">
    {% for quiz in quizzes %}
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
    >
      <div>
        <strong>{{ quiz.title }}</strong><br />
        <small>{{ quiz.description }}</small>
      </div>
      <a href="{% url 'quiz:start' quiz.id %}" class="btn btn-primary btn-sm"
        >Start</a
      >
    </li>
    {% empty %}
    <li class="list-group-item">No quizzes available</li>
    {% endfor %}
  </ul>

  <h4>Your Attempts</h4>
  <ul class="list-group">
    {% for attempt in attempts %}
    <li class="list-group-item">
      {{ attempt.quiz.title }} - Score: {{ attempt.score }}%
    </li>
    {% empty %}
    <li class="list-group-item">No attempts yet</li>
    {% endfor %}
  </ul>
  {% if report %}
  <h2>ðŸ“Š Simple Report (Admin Only)</h2>
  <table
    border="1"
    cellpadding="6"
    cellspacing="0"
    style="width: 100%; border-collapse: collapse"
  >
    <thead>
      <tr style="background: #f5f5f5">
        <th>User</th>
        <th>Quiz</th>
        <th>Score</th>
        <th>Date Taken</th>
      </tr>
    </thead>
    <tbody>
      {% for attempt in report %}
      <tr>
        <td>{{ attempt.user.username }}</td>
        <td>{{ attempt.quiz.title }}</td>
        <td>{{ attempt.score }}%</td>
        <td>{{ attempt.date_taken|date:"M d, Y H:i" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" style="text-align: center">No attempts yet</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}
